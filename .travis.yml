sudo: required
language: node_js
os: osx
env:
  global:
    - _FORCE_LOGS=1
matrix:
  include:
    - osx_image: xcode7.3
      node_js: "8"
    - osx_image: xcode7.3
      node_js: "10"
    - osx_image: xcode9.4
      node_js: "8"
    - osx_image: xcode9.4
      node_js: "10"
    - osx_image: xcode10
      node_js: "8"
    - osx_image: xcode10
      node_js: "10"
    - osx_image: xcode10.1
      node_js: "8"
    - osx_image: xcode10.1
      node_js: "10"
    - osx_image: xcode10.2
      node_js: "8"
      env:
        - DEVICE_NAME="iPhone X"
    - osx_image: xcode10.2
      node_js: "10"
      env:
        - DEVICE_NAME="iPhone X"
script:
  - xcrun simctl list devices
  - npm run test && _FORCE_LOGS=1 npm run e2e-test
after_success:
    - npm run coverage
